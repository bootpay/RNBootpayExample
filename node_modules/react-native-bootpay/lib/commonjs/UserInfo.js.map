{"version":3,"sources":["UserInfo.js"],"names":["UserInfo","Component","key","defaultVal","Promise","resolve","reject","SInfo","getItem","sharedPreferencesName","keychainService","then","res","undefined","catch","error","val","setItem","String","uuid","DeviceInfo","getUniqueId","setBootpayInfo","getBootpayInfo","time","setBootpaySK","parseInt","getBootpayUUID","bootpaySK","getBootpaySK","lastTime","getBootpayLastTime","newBootpaySK","current","Date","now","isExpired","setBootpayLastTime"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DeviceInfo from 'react-native-device-info';\nimport SInfo from 'react-native-sensitive-info'; \n\nexport default class UserInfo extends Component { \n    static getBootpayInfo = (key, defaultVal) => {\n        return new Promise((resolve, reject) => {\n            SInfo.getItem(key, {\n                sharedPreferencesName: 'bootpaySharedPrefs',\n                keychainService: 'bootpayKeychain'\n            }).then((res) => { \n                res == undefined ? resolve(defaultVal) : resolve(res); \n                resolve(res);\n            }).catch((error) => { \n                reject(error);\n            }); \n        })\n    }\n\n    static setBootpayInfo = (key, val) => {\n        return new Promise((resolve, reject) => {\n            SInfo.setItem(String(key), String(val), {\n                sharedPreferencesName: 'bootpaySharedPrefs',\n                keychainService: 'bootpayKeychain'\n            }).then((res) => { \n                resolve(res);\n            }).catch((error) => { \n                reject(error);\n            }); \n        })\n    }\n\n\n    static getBootpayUUID = () => {\n        let uuid = DeviceInfo.getUniqueId();\n        return this.setBootpayInfo('uuid', uuid); \n        return this.setBootpayInfo('uuid', uuid); \n    }\n\n    static getBootpaySK = () => {\n        return this.getBootpayInfo('bootpay_sk', ''); \n    }\n\n    static setBootpaySK = (val) => {\n        return this.setBootpayInfo('bootpay_sk', val); \n    }\n\n    static newBootpaySK = (uuid, time) => {\n        return this.setBootpaySK(`${uuid}_${time}`); \n    }\n\n    static getBootpayLastTime = async () => {\n        const time = await this.getBootpayInfo('bootpay_last_time', 0); \n        return parseInt(time);\n    }\n\n    static setBootpayLastTime = (val) => {\n        return this.setBootpayInfo('bootpay_last_time', val); \n    }\n\n    static getBootpayUserId = () => {\n        return this.getBootpayInfo('bootpay_user_id', ''); \n    }\n\n    static setBootpayUserId = (val) => {\n        return this.setBootpayInfo('bootpay_user_id', val); \n    }\n\n    static updateInfo = async () => {\n        const uuid = await UserInfo.getBootpayUUID();\n        const bootpaySK = await this.getBootpaySK();\n        const lastTime = await this.getBootpayLastTime();\n \n        if(bootpaySK == '') await this.newBootpaySK(uuid, current);\n\n        const current = Date.now();\n        const isExpired = current - lastTime > 30 * 60 * 1000;\n        if(isExpired) this.newBootpaySK(uuid, current);\n        this.setBootpayLastTime(current);\n    }\n}"]}
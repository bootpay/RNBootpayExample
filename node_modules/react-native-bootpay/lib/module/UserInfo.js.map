{"version":3,"sources":["UserInfo.js"],"names":["React","Component","DeviceInfo","SInfo","UserInfo","key","defaultVal","Promise","resolve","reject","getItem","sharedPreferencesName","keychainService","then","res","undefined","catch","error","val","setItem","String","uuid","getUniqueId","setBootpayInfo","getBootpayInfo","time","setBootpaySK","parseInt","getBootpayUUID","bootpaySK","getBootpaySK","lastTime","getBootpayLastTime","newBootpaySK","current","Date","now","isExpired","setBootpayLastTime"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DeviceInfo from 'react-native-device-info';\nimport SInfo from 'react-native-sensitive-info'; \n\nexport default class UserInfo extends Component { \n    static getBootpayInfo = (key, defaultVal) => {\n        return new Promise((resolve, reject) => {\n            SInfo.getItem(key, {\n                sharedPreferencesName: 'bootpaySharedPrefs',\n                keychainService: 'bootpayKeychain'\n            }).then((res) => { \n                res == undefined ? resolve(defaultVal) : resolve(res); \n                resolve(res);\n            }).catch((error) => { \n                reject(error);\n            }); \n        })\n    }\n\n    static setBootpayInfo = (key, val) => {\n        return new Promise((resolve, reject) => {\n            SInfo.setItem(String(key), String(val), {\n                sharedPreferencesName: 'bootpaySharedPrefs',\n                keychainService: 'bootpayKeychain'\n            }).then((res) => { \n                resolve(res);\n            }).catch((error) => { \n                reject(error);\n            }); \n        })\n    }\n\n\n    static getBootpayUUID = () => {\n        let uuid = DeviceInfo.getUniqueId();\n        return this.setBootpayInfo('uuid', uuid); \n        return this.setBootpayInfo('uuid', uuid); \n    }\n\n    static getBootpaySK = () => {\n        return this.getBootpayInfo('bootpay_sk', ''); \n    }\n\n    static setBootpaySK = (val) => {\n        return this.setBootpayInfo('bootpay_sk', val); \n    }\n\n    static newBootpaySK = (uuid, time) => {\n        return this.setBootpaySK(`${uuid}_${time}`); \n    }\n\n    static getBootpayLastTime = async () => {\n        const time = await this.getBootpayInfo('bootpay_last_time', 0); \n        return parseInt(time);\n    }\n\n    static setBootpayLastTime = (val) => {\n        return this.setBootpayInfo('bootpay_last_time', val); \n    }\n\n    static getBootpayUserId = () => {\n        return this.getBootpayInfo('bootpay_user_id', ''); \n    }\n\n    static setBootpayUserId = (val) => {\n        return this.setBootpayInfo('bootpay_user_id', val); \n    }\n\n    static updateInfo = async () => {\n        const uuid = await UserInfo.getBootpayUUID();\n        const bootpaySK = await this.getBootpaySK();\n        const lastTime = await this.getBootpayLastTime();\n \n        if(bootpaySK == '') await this.newBootpaySK(uuid, current);\n\n        const current = Date.now();\n        const isExpired = current - lastTime > 30 * 60 * 1000;\n        if(isExpired) this.newBootpaySK(uuid, current);\n        this.setBootpayLastTime(current);\n    }\n}"]}